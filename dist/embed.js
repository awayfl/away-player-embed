!function(){"use strict";var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};"function"==typeof SuppressedError&&SuppressedError;var e=document.currentScript.src,r=new URL(".",e).href,n={direction:"lr",back:"#130d02",line:"#f29f01",rect:[.25,.77,.5,.01]},i=function(e){function i(){var t=e.call(this)||this;return t._runConfig={},t.onError=t.onError.bind(t),t._root=t.attachShadow({mode:"closed"}),t}return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(i,e),Object.defineProperty(i,"observedAttributes",{get:function(){return["src","width","height"]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"player",{get:function(){return this._player},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"config",{get:function(){return this._runConfig},set:function(t){this._runConfig=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"src",{get:function(){return this._runConfig.src||this.getAttribute("src")},set:function(t){this._runConfig.src=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this._runConfig.width||this.getAttribute("width")},set:function(t){this._runConfig.width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._runConfig.height||this.getAttribute("height")},set:function(t){this._runConfig.height=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"runtimeBaseUrl",{get:function(){return this._runConfig.runtimeBaseUrl},set:function(t){this._runConfig.runtimeBaseUrl=t},enumerable:!1,configurable:!0}),i.prototype._getRuntimeUrl=function(){var t=this._runConfig.runtimeBaseUrl;return{loader:new URL("loader.js",t).href,runtime:new URL("runtime.js",t).href,baseUrl:t}},i.prototype._dropPlayer=function(){this._gameFrame&&(this._gameFrame.remove(),this._player=null)},i.prototype.onError=function(t){var e=this._runConfig.onError&&self[this._runConfig.onError];"function"==typeof e&&e(t),this.dispatchEvent(new ErrorEvent("error",{error:new Error("Awayfl runtime error"),message:(null==t?void 0:t.message)||t}))},i.prototype._attachRuntimeEvents=function(){var t=this,e=this._gameFrame.contentWindow;e.addEventListener("awayfl-player-init",(function(e){var r=e.detail;t._player=r}),{once:!0}),e.addEventListener("awayfl-player-load",(function(){var e=t._runConfig.onLoad&&self[t._runConfig.onLoad];"function"==typeof e&&e(),t.dispatchEvent(new CustomEvent("load")),t._gameFrame.style.display=""}),{once:!0}),e.addEventListener("awayfl-player-progress",(function(e){var r=e.detail,n=t._runConfig.onProgress&&self[t._runConfig.onProgress];"function"==typeof n&&n(r),t.dispatchEvent(new CustomEvent("progress",{detail:r}))}))},i.prototype._buildTemplate=function(t){var e='<!DOCTYPE html>\r\n<head>\r\n\t<meta name="viewport"\r\n\t\tcontent="height=device-height, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" />\r\n\t<title>AwayFL Embedded Player 0.0.33</title>\r\n\t<style>\r\n\t\t* {\r\n\t\t\tmargin: 0;\r\n\t\t\tpadding: 0;\r\n\t\t}\r\n\r\n\t\tcanvas {\r\n\t\t\toutline: none\r\n\t\t}\r\n\r\n\t\thtml, body, #container {\r\n\t\t\tmargin: 0;\r\n\t\t\toverflow: hidden;\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tbackground-color: black;\r\n\t\t}\r\n\r\n\t\t#splash__image {\r\n\t\t\twidth: 100%;\r\n\t\t\theight: 100%;\r\n\t\t\tposition: absolute;\r\n\t\t\tbackground-size: contain;\r\n\t\t\tbackground-position: center;\r\n\t\t\tbackground-repeat: no-repeat;\r\n\t\t\tvisibility: visible;\r\n\t\t\ttransition: all 0.5s;\r\n\t\t\tz-index: 10;\r\n\t\t}\r\n\r\n\t\t#progress__root {\r\n\t\t\tposition: absolute;\r\n\t\t}\r\n\r\n\t\t#progress__line {\r\n\t\t\twidth: 0;\r\n\t\t\theight: 100%;\r\n\t\t\ttransition: all 0.5s;\r\n\t\t}\r\n\t</style>\r\n\t<script src="__LOADER_URL__"><\/script>\r\n</head>\r\n\r\n<body>\r\n\t<div id="splash__image">\r\n\t\t<div id="progress__root">\r\n\t\t\t<div id="progress__line"></div>\r\n\t\t</div>\r\n\t</div>\r\n\t<script>\r\n\t\twindow.addEventListener("load", () => {\r\n\r\n\t\t\tconst config = JSON.parse(__GAME_CONFIG__);\r\n\r\n\t\t\tAWAYFL.LegacyLoader.init(config);\r\n\t\t\tAWAYFL.LegacyLoader.runGame((fill) => {\r\n\t\t\t\twindow.dispatchEvent(new CustomEvent(\'awayfl-player-progress\', {detail: fill}));\r\n\t\t\t}, (config, hideLoader) => {\r\n\t\t\t\tconst player = new AWAYFL.Player(document, config);\r\n\t\t\t\twindow.dispatchEvent(new CustomEvent(\'awayfl-player-init\', {detail: player}));\r\n\t\t\t\tplayer\r\n\t\t\t\t\t.loadAndPlay()\r\n\t\t\t\t\t.then((_, hide) => {\r\n\t\t\t\t\t\twindow.dispatchEvent(new CustomEvent(\'awayfl-player-load\'));\r\n\t\t\t\t\t\thide && hide() || window.swfParseComplete && window.swfParseComplete();;\r\n\t\t\t\t\t});\t\t\t\t\r\n\t\t\t})\r\n\t\t});\r\n\t<\/script>\r\n</body>',r=this._getRuntimeUrl(),n={width:t.clientWidth,height:t.clientHeight,splash:this._runConfig.splash,progress:this._runConfig.progress,runtime:[r.runtime],binary:[{path:this._runConfig.src,resourceType:"GAME",name:"Game",meta:{}}],baseUrl:r.baseUrl,maxStageScale:+this._runConfig.maxStageScale,runtimeFlags:{defaultSmoothBitmap:!!this._runConfig.smoothBitmaps}};return e.replace(/__LOADER_URL__/,r.loader).replace(/__GAME_CONFIG__/,JSON.stringify(JSON.stringify(n)))},i.prototype._constructPlayer=function(){var t=this._root,e=document.createElement("iframe");e.style.border="none",e.style.display=!1===this._runConfig.splash?"none":"",e.width=""+this._runConfig.width,e.height=""+this._runConfig.height,this._gameFrame=e,t.appendChild(e),e.addEventListener("load",this._attachRuntimeEvents.bind(this),{once:!0}),e.addEventListener("error",this.onError),e.srcdoc=this._buildTemplate(e)},i.prototype._mapAttrs=function(){var t=this,e=this.querySelectorAll("param"),r=this.getAttributeNames(),n=i.BINDING_CONFIG;e.forEach((function(e){e.name in n&&(t._runConfig[e.name]=e.value)})),r.forEach((function(e){e in n&&(t._runConfig[e]=t.getAttribute(e))}))},i.prototype._loadGlobalConfig=function(){for(var t=window.AWAY_EMBED_CFG,e=i.BINDING_CONFIG,r=0,n=Object.entries(t);r<n.length;r++){var o=n[r],a=o[0],s=o[1];a in e&&(this._runConfig[a]=s)}},i.prototype._setDefaults=function(){var t=i.BINDING_CONFIG;for(var e in t){if(t[e].required&&void 0===this._runConfig[e])throw"Parameter ".concat(e," is required!");void 0===this._runConfig[e]&&(this._runConfig[e]=t[e].default)}},i.prototype.connectedCallback=function(){var t=this;setTimeout((function(){t._loaderHolder=t.querySelector("div.awayfl__loader"),t._loadGlobalConfig(),t._mapAttrs(),t._setDefaults(),t._constructPlayer();var e=document.createElement("style");e.textContent="\n            :host {\n                display: block;\n                contain: content;\n                width: ".concat(t._runConfig.width,";\n                height: ").concat(t._runConfig.height,";\n            }\n            "),t._root.appendChild(e)}))},i.prototype.disconnectedCallback=function(){this._dropPlayer()},i.prototype.attributeChangedCallback=function(t,e,r){if(this.isConnected)return"src"===t&&this._player?(this._dropPlayer(),this._runConfig.src=r,void this._constructPlayer()):void("width"!==t&&"height"!==t||this._root.styleSheets[0].insertRule(":host { ".concat(t,": ").concat(r,";}")))},i.BINDING_CONFIG={version:{required:!1,default:"latest"},runtimeBaseUrl:{required:!1,default:r},src:{required:!0},avm1:{required:!1,default:!1},width:{required:!1,default:550},height:{required:!1,default:400},onLoad:{required:!1},onProgress:{required:!1},onError:{required:!1},scaleMode:{required:!1,default:"all"},autoplay:{required:!1,default:!0},maxStageScale:{required:!1,default:void 0},splash:{required:!1,default:"splash.jpg"},progress:{required:!1,default:n},smoothBitmaps:{required:!1,default:!1}},i}(HTMLElement);customElements.define("awayfl-player",i);var o=function(t){return console.warn("AwayFL loader does not support "+t)};document.currentScript.src;var a,s=window;s.swfObject&&console.warn("Replace `swfObject` with AwayFl loader!"),document.addEventListener("load",(function(){}));var u={registerObject:function(){return o("registerObject")},getObjectById:function(){return o("getObjectById")},switchOffAutoHideShow:function(){return o("switchOffAutoHideShow")},enableUriEncoding:function(){return o("enableUriEncoding")},getFlashPlayerVersion:function(){return o("getFlashPlayerVersion")},createSWF:function(){return o("createSWF")},showExpressInstall:function(){return o("showExpressInstall")},createCSS:function(){return o("createCSS")},getQueryParamValue:function(){return o("getQueryParamValue")},get ua(){return o("ua")},embedSWF:function(t,e,r,n,o,u,l,c,d,f){var h="string"==typeof e?document.getElementById(e):e,p=function(t,e,r,n){s.AWAY_EMBED_CFG||(console.info("AwayFL configuration not found. To set custom options, define a `AWAY_EMBED_CFG` object as explained in the Readme"),s.AWAY_EMBED_CFG={}),(a=s.AWAY_EMBED_CFG).splash,a.progress;var o=new i;o.src=t,o.width=r,o.height=n;var u=a.runtimeBaseUrl;u&&(o.runtimeBaseUrl=u);var l=e.id,c=e.className,d=e.parentElement;return e.id=null,e.className="",o.id=l,o.className=c,d.replaceChild(o,e),o}(t,h,r,n);p.onload=function(){f&&f({success:!0,ref:p,id:h.id})}}};s.swfObject=u}();
//# sourceMappingURL=embed.js.map
